	<!DOCTYPE html>
<html>
  <head>
    <link type="text/css" rel="stylesheet" href="/assets/dist/app.0eed6e1f6e88200b28c4.css"  media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="/assets/dist/fullpagejs/dist/jquery.fullpage.min.css"  media="screen,projection"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>
<body>
<main>
<div class="navbar-fixed" id="header">
    <nav class="white">
        <div class="container">
          <div class="row nav-wrapper">
              <div class="col s5">
                <ul class="hide-on-med-and-down">
                  <li><a href="/"><strong>Home</strong></a></li>
                  <li><a class='dropdown-button' href='#' data-activates='category-lists'>Posts</a></li>
                  <li><a href="/posts/about-me.html" class="">About Me</a></li>
                </ul>
              </div>
              <div class="col s4 header-social">
                  <ul class="rrssb-buttons tiny-format fixed-size">
  <li class="rrssb-wechat">
    <a class="popup" data-url="http://weixin.qq.com/r/P8yrsxbESks1rVLQ95kt" data-title="扫描二维码加我微信" data-confirm-text="取消">
      <span class="rrssb-icon">
          <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" width="36.969" height="29.031" viewBox="0 0 36.969 29.031"><defs><style>.cls-1{fill:#000;fill-rule:evenodd}</style></defs><path d="M32.399 25.866l.985 3.152-3.591-1.894c-1.31.316-2.625.631-3.928.631-6.229 0-11.134-4.099-11.134-9.146 0-5.041 4.905-9.15 11.134-9.15 5.882 0 11.119 4.109 11.119 9.15 0 2.842-1.958 5.359-4.585 7.257zM22.256 14.509c-.652 0-1.309.633-1.309 1.26 0 .638.657 1.262 1.309 1.262.99 0 1.637-.624 1.637-1.262 0-.627-.647-1.26-1.637-1.26zm7.2 0c-.647 0-1.301.633-1.301 1.26 0 .638.654 1.262 1.301 1.262.981 0 1.638-.624 1.638-1.262 0-.627-.657-1.26-1.638-1.26zM13.908 18.76c0 .915.148 1.798.404 2.641-.404.031-.811.05-1.222.05-1.634 0-2.948-.321-4.586-.632l-4.575 2.209 1.309-3.791C1.96 17.031.001 14.187.001 10.726.001 4.728 5.894.004 13.09.004c6.437 0 12.075 3.774 13.208 8.852a12.005 12.005 0 0 0-1.261-.073c-6.219 0-11.129 4.469-11.129 9.977zM8.837 5.365c-.981 0-1.971.624-1.971 1.573 0 .945.99 1.578 1.971 1.578.982 0 1.634-.633 1.634-1.578 0-.949-.652-1.573-1.634-1.573zm9.161 0c-.981 0-1.964.624-1.964 1.573 0 .945.983 1.578 1.964 1.578.986 0 1.638-.633 1.638-1.578 0-.949-.652-1.573-1.638-1.573z" class="cls-1"/></svg>
      </span>
    </a>
  </li>
  <li class="rrssb-weibo">
    <a href="http://weibo.com/u/2830658314" target="blank">
      <span class="rrssb-icon">
        <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" width="37" height="30" viewBox="0 0 37 30"><defs><style>.cls-1{fill:#000;fill-rule:evenodd}</style></defs><path d="M36.539 12.806v.006a1.418 1.418 0 0 1-2.698-.875h-.001a6.974 6.974 0 0 0-1.456-6.82 6.965 6.965 0 0 0-6.631-2.147 1.418 1.418 0 0 1-.592-2.775h.001a9.791 9.791 0 0 1 9.327 3.022 9.803 9.803 0 0 1 2.05 9.589zm-9.818-5.3v-.001a1.22 1.22 0 1 1-.509-2.386 4.772 4.772 0 0 1 5.54 6.141 1.222 1.222 0 0 1-1.536.787 1.222 1.222 0 0 1-.785-1.538h-.002a2.332 2.332 0 0 0-2.708-3.003zm.489 2.284c.641.916.579 2.2-.012 3.688-.273.685.085.791.606.948 2.123.658 4.487 2.252 4.487 5.059 0 4.647-6.697 10.5-16.765 10.5-7.679 0-15.529-3.724-15.529-9.85 0-3.202 2.028-6.905 5.519-10.399 4.663-4.664 10.1-6.789 12.145-4.742.902.902.989 2.464.409 4.329-.302.939.881.419.881.421 3.769-1.579 7.057-1.672 8.259.046zm-1.287 9.611c-.397-4.024-5.687-6.796-11.816-6.19-6.127.607-10.774 4.361-10.376 8.386.398 4.026 5.688 6.797 11.816 6.192 6.129-.606 10.773-4.361 10.376-8.388zM11.584 26.06c-2.946-.952-4.193-3.862-2.903-6.484 1.267-2.571 4.562-4.025 7.478-3.266 3.018.78 4.558 3.629 3.325 6.395-1.251 2.831-4.848 4.34-7.9 3.355zm1.664-5.511c-.949-.398-2.175.011-2.761.93-.593.923-.314 2.022.628 2.451.956.437 2.225.022 2.818-.924.582-.956.275-2.048-.685-2.457zm2.339-.97c-.364-.145-.819.03-1.033.389-.207.36-.093.77.272.92.371.153.845-.023 1.059-.39.205-.369.072-.784-.298-.919z" class="cls-1"/></svg>
      </span>
    </a>
  </li>
  <li class="rrssb-twitter">
      <a href="https://twitter.com/akulubala" target="blank">
        <span class="rrssb-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M24.253 8.756C24.69 17.08 18.297 24.182 9.97 24.62a15.093 15.093 0 0 1-8.86-2.32c2.702.18 5.375-.648 7.507-2.32a5.417 5.417 0 0 1-4.49-3.64c.802.13 1.62.077 2.4-.154a5.416 5.416 0 0 1-4.412-5.11 5.43 5.43 0 0 0 2.168.387A5.416 5.416 0 0 1 2.89 4.498a15.09 15.09 0 0 0 10.913 5.573 5.185 5.185 0 0 1 3.434-6.48 5.18 5.18 0 0 1 5.546 1.682 9.076 9.076 0 0 0 3.33-1.317 5.038 5.038 0 0 1-2.4 2.942 9.068 9.068 0 0 0 3.02-.85 5.05 5.05 0 0 1-2.48 2.71z"/></svg>
        </span>
      </a>
  </li>
  <li class="rrssb-github">
      <a href="https://github.com/akulubala" target="blank">
        <span class="rrssb-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M13.971 1.571c-7.031 0-12.734 5.702-12.734 12.74 0 5.621 3.636 10.392 8.717 12.083.637.129.869-.277.869-.615 0-.301-.012-1.102-.018-2.164-3.542.77-4.29-1.707-4.29-1.707-.579-1.473-1.414-1.863-1.414-1.863-1.155-.791.088-.775.088-.775 1.277.104 1.96 1.316 1.96 1.312 1.136 1.936 2.991 1.393 3.713 1.059.116-.822.445-1.383.81-1.703-2.829-.32-5.802-1.414-5.802-6.293 0-1.391.496-2.527 1.312-3.418-.132-.322-.57-1.617.123-3.371 0 0 1.069-.342 3.508 1.306a12.22 12.22 0 0 1 3.188-.429c1.081 0 2.166.155 3.197.438 2.431-1.648 3.498-1.306 3.498-1.306.695 1.754.258 3.043.129 3.371a4.968 4.968 0 0 1 1.315 3.43c0 4.892-2.978 5.968-5.814 6.285.458.387.876 1.16.876 2.357 0 1.703-.016 3.076-.016 3.482 0 .334.232.748.877.611 5.056-1.688 8.701-6.457 8.701-12.082-.056-7.057-5.752-12.756-12.793-12.748z"/></svg>
        </span>
      </a>
  </li>
  <li class="rrssb-stackoverflow">
      <a href="https://stackoverflow.com/users/1364309" target="blank">
        <span class="rrssb-icon">
          <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" width="24" height="30" viewBox="0 0 24 30"><defs><style>.cls-1{fill:#000;fill-rule:evenodd}</style></defs><path d="M21.459 12.096L19.395.438l2.539-.432 2.064 11.658-2.539.432zm-2.59 1.577l-6.798-9.776L14.2 2.473l6.797 9.777-2.128 1.423zm-1.729 2.523L6.748 10.185l1.31-2.177 10.391 6.012-1.309 2.176zm-.88 3.155L4.609 16.279l.669-2.44 11.651 3.072-.669 2.44zm-.36 3.373L3.887 21.64l.236-2.517 12.013 1.085-.236 2.516zm.018 3.331H3.797v-2.703h12.121v2.703zm2.02-8.355h2.02l-.003 11.687s0 .59-.02.59v.01H.632s-.602 0-.602-.01H.01V17.7h2.02v10.321h15.908V17.7z" class="cls-1"/></svg>
        </span>
      </a>
  </li>
</ul>
              </div>
              <div class="col s3">
                <div class="input-field">
                      <input id="search" type="search" placeholder="~$ Hit enter to search.." required>
                      <i class="material-icons">search</i>
                </div>
              </div>
          </div>
        </div>
    </nav>
</div>
	<div class="container">
		<div class="row">
      <div class="col s12 valign-wrapper" id="motto">
        <h4>Love me little, love me long.</h4>
      </div>
      <div class="col s12 hide" id="search-result">
          <div class="col s12">
              <h5>Search Result For:<span class="search-key"></span></h5>
          </div>
      </div>
      <div class="col s12 hide no-results">
      		<div class="card">
	            <div class="card-content">
	              <span class="card-title">No Results Found...</span>
	              <p>Sorry, but nothing matched your search terms. Please try again with some different keywords.</p>
	            </div>
          </div>
      </div>
</div>
	    <div id="content" class="markdown-body">
           <h5 id="page_title">Zend Framework 2 安装使用Firephp</h5>
           <p class="date">Dec 20, 2013</p>
			<h2 id="zend-framework-2-配置firephp">##Zend framework 2 配置firephp</h2>
<p>方法一（全局使用）
===</p>
<ol>
  <li>下载firephp：（http://www.firephp.org/DownloadRelease/FirePHPLibrary-FirePHPCore-0.3.2）</li>
  <li>
    <p>我的放置位置并加上namespace如同：</p>

    <p>![project_tree][1]</p>

    <p>图中文件名要改掉:FirePHP.class.php -&gt;FirePHP.php</p>
  </li>
  <li>修改public 目录下index.php 为:
    <blockquote>
      <div class="highlighter-rouge"><pre class="highlight"><code>chdir(dirname(__DIR__));  
define("PROJECT_PATH", getcwd().DIRECTORY_SEPARATOR);  
include   'system/Zend/Loader/AutoloaderFactory.php';  
Zend\Loader\AutoloaderFactory::factory(array(  
'Zend\Loader\StandardAutoloader' =&gt; array(  
    'autoregister_zf' =&gt; true,  
    'namespaces'=&gt;array(  
        'Library'=&gt;PROJECT_PATH.'system\Library'
    )
)
  ));  
</code></pre>
      </div>
    </blockquote>
  </li>
  <li>更改ZF2对于firephp的默认namespace(路径：zend/Log/Writer)，如图：
![enter image description here][2]</li>
  <li>module/Module.php 文件中增加：
    <blockquote>
      <p>use Zend\Log\Logger;<br />
  use Zend\Log\Writer\FirePhp\FirePhpBridge;<br />
  use Zend\Log\Writer\FirePhp; 
  use Library\FirePHPCore\FirePHP as FirephpCore;<br />
  <strong>注意大小写，引入了两个firephp</strong></p>

    </blockquote>
  </li>
</ol>

<p>然后在getServiceConfig()return 的数组中添加：</p>
<blockquote>
  <div class="highlighter-rouge"><pre class="highlight"><code>'log' =&gt; function (\$sm){  
     \$log = new Logger();  
     \$writer = new FirePhp(new FirePhpBridge(new FirephpCore()));  
     \$log-&gt;addWriter(\$writer);  
     return \$log;  
 }  
</code></pre>
  </div>
</blockquote>

<p>###大功告成：在controller 测试：</p>
<blockquote>
  <p>$this-&gt;getServiceLocator()-&gt;get(‘log’)-&gt;info(‘It works ssss’);<br />
方法二：每个模块里面都需要引入firephp 文件
===</p>
</blockquote>

<ol>
  <li>从方法一种2开始，但是不要更改任何东西，不要加namespace,可以改文件名，后面autoload的时候根据文件名就可以了。</li>
  <li>方法一中3，中不要把library 加入到自动加载中</li>
  <li>也不要更改zend库中任何东西，方法一中4</li>
  <li>module/Module.php 文件中增加：
    <blockquote>
      <p>use Zend\Log\Logger;<br />
  use Zend\Log\Writer\FirePhp;</p>
    </blockquote>
  </li>
</ol>

<p>然后在getServiceConfig()return 的数组中添加：</p>

<blockquote>
  <div class="highlighter-rouge"><pre class="highlight"><code>  'log' =&gt; function ($sm){
        $log = new Logger();
        $writer = new FirePhp();
        $log-&gt;addWriter($writer);
        return $log;
    } 5. module/autoload_classmap.php中添加：  
   
return array(  
        'FirePHP' =&gt; 'system/Library/FirePHPCore/FirePHP.php',  
); OK 完成！ 测试同方法一一样！   [1]: http://akulubala.github.io/public/images/2013/project_tree.jpg   [2]: http://akulubala.github.io/public/images/2013/firephp_namespace.jpg
</code></pre>
  </div>
</blockquote>

		</div>
		<div class="post-share">
    		<a href="#" class="share-action"><i class="material-icons md-dark">share</i></a>
	        <ul class="rrssb-buttons round-format fixed-size">
  <li class="rrssb-wechat">
    <a class="popup" data-url="http://akulubala.github.io" data-title="扫描二维码分享至微信" data-confirm-text="取消">
      <span class="rrssb-icon">
          <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" width="36.969" height="29.031" viewBox="0 0 36.969 29.031"><defs><style>.cls-1{fill:#000;fill-rule:evenodd}</style></defs><path d="M32.399 25.866l.985 3.152-3.591-1.894c-1.31.316-2.625.631-3.928.631-6.229 0-11.134-4.099-11.134-9.146 0-5.041 4.905-9.15 11.134-9.15 5.882 0 11.119 4.109 11.119 9.15 0 2.842-1.958 5.359-4.585 7.257zM22.256 14.509c-.652 0-1.309.633-1.309 1.26 0 .638.657 1.262 1.309 1.262.99 0 1.637-.624 1.637-1.262 0-.627-.647-1.26-1.637-1.26zm7.2 0c-.647 0-1.301.633-1.301 1.26 0 .638.654 1.262 1.301 1.262.981 0 1.638-.624 1.638-1.262 0-.627-.657-1.26-1.638-1.26zM13.908 18.76c0 .915.148 1.798.404 2.641-.404.031-.811.05-1.222.05-1.634 0-2.948-.321-4.586-.632l-4.575 2.209 1.309-3.791C1.96 17.031.001 14.187.001 10.726.001 4.728 5.894.004 13.09.004c6.437 0 12.075 3.774 13.208 8.852a12.005 12.005 0 0 0-1.261-.073c-6.219 0-11.129 4.469-11.129 9.977zM8.837 5.365c-.981 0-1.971.624-1.971 1.573 0 .945.99 1.578 1.971 1.578.982 0 1.634-.633 1.634-1.578 0-.949-.652-1.573-1.634-1.573zm9.161 0c-.981 0-1.964.624-1.964 1.573 0 .945.983 1.578 1.964 1.578.986 0 1.638-.633 1.638-1.578 0-.949-.652-1.573-1.638-1.573z" class="cls-1"/></svg>
      </span>
      <span class="rrssb-text">Wechat</span>
    </a>
  </li>
  <li class="rrssb-weibo">
    <a class="popup" href="http://service.weibo.com/share/share.php?text=##Zend framework 2 配置firephp方法一（全局使用）===  下载firephp：（http://www.firephp.org/DownloadRelease/FirePHPLibrary-FirePHPCore-0.3.2）      我的放置位置并加上namespace如同：    ![project_tree][1]    图中文件名要改掉:FirePHP.cl...&title=Zend Framework 2 安装使用Firephp&url=https://akulubala.github.io//zf2/2013/12/20/ZF2-install-firephp.html">
      <span class="rrssb-icon">
        <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" width="37" height="30" viewBox="0 0 37 30"><defs><style>.cls-1{fill:#000;fill-rule:evenodd}</style></defs><path d="M36.539 12.806v.006a1.418 1.418 0 0 1-2.698-.875h-.001a6.974 6.974 0 0 0-1.456-6.82 6.965 6.965 0 0 0-6.631-2.147 1.418 1.418 0 0 1-.592-2.775h.001a9.791 9.791 0 0 1 9.327 3.022 9.803 9.803 0 0 1 2.05 9.589zm-9.818-5.3v-.001a1.22 1.22 0 1 1-.509-2.386 4.772 4.772 0 0 1 5.54 6.141 1.222 1.222 0 0 1-1.536.787 1.222 1.222 0 0 1-.785-1.538h-.002a2.332 2.332 0 0 0-2.708-3.003zm.489 2.284c.641.916.579 2.2-.012 3.688-.273.685.085.791.606.948 2.123.658 4.487 2.252 4.487 5.059 0 4.647-6.697 10.5-16.765 10.5-7.679 0-15.529-3.724-15.529-9.85 0-3.202 2.028-6.905 5.519-10.399 4.663-4.664 10.1-6.789 12.145-4.742.902.902.989 2.464.409 4.329-.302.939.881.419.881.421 3.769-1.579 7.057-1.672 8.259.046zm-1.287 9.611c-.397-4.024-5.687-6.796-11.816-6.19-6.127.607-10.774 4.361-10.376 8.386.398 4.026 5.688 6.797 11.816 6.192 6.129-.606 10.773-4.361 10.376-8.388zM11.584 26.06c-2.946-.952-4.193-3.862-2.903-6.484 1.267-2.571 4.562-4.025 7.478-3.266 3.018.78 4.558 3.629 3.325 6.395-1.251 2.831-4.848 4.34-7.9 3.355zm1.664-5.511c-.949-.398-2.175.011-2.761.93-.593.923-.314 2.022.628 2.451.956.437 2.225.022 2.818-.924.582-.956.275-2.048-.685-2.457zm2.339-.97c-.364-.145-.819.03-1.033.389-.207.36-.093.77.272.92.371.153.845-.023 1.059-.39.205-.369.072-.784-.298-.919z" class="cls-1"/></svg>
      </span>
      <span class="rrssb-text">Weibo</span>
    </a>
  </li>
  <li class="rrssb-douban">
      <a class="popup" href="http://shuo.douban.com/!service/share?href=https://akulubala.github.io//zf2/2013/12/20/ZF2-install-firephp.html&name=Zend Framework 2 安装使用Firephp&text=##Zend framework 2 配置firephp方法一（全局使用）===  下载firephp：（http://www.firephp.org/DownloadRelease/FirePHPLibrary-FirePHPCore-0.3.2）      我的放置位置并加上namespace如同：    ![project_tree][1]    图中文件名要改掉:FirePHP.cl...&starid=0&aid=0&style=11">
        <span class="rrssb-icon">
          <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" width="32" height="28" viewBox="0 0 32 28"><defs><style>.cls-1{fill:#000;fill-rule:evenodd}</style></defs><path d="M9.731 18.328c1.303 1.777 2.478 4.013 3.507 6.521h6.323c1.23-1.935 2.18-4.173 3.108-6.521l3.568 1.199c-.933 1.98-2.068 3.817-3.135 5.322h8.853L32 28H0v-3l9.697-.151a41.574 41.574 0 0 0-3.248-5.322l3.282-1.199zM1 0h30v3H1V0zm3.132 5.882L28 6v12H4l.132-12.118zM25 15l.126-6.162L7 9v6h18z" class="cls-1"/></svg>
        </span>
        <span class="rrssb-text">Douban</span>
      </a>
  </li>
  <li class="rrssb-facebook">
      <!--  Replace with your URL. For best results, make sure you page has the proper FB Open Graph tags in header:
            https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content/ -->
      <a href="https://www.facebook.com/sharer/sharer.php?u=https://akulubala.github.io//zf2/2013/12/20/ZF2-install-firephp.html" class="popup">
        <span class="rrssb-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 29"><path d="M26.4 0H2.6C1.714 0 0 1.715 0 2.6v23.8c0 .884 1.715 2.6 2.6 2.6h12.393V17.988h-3.996v-3.98h3.997v-3.062c0-3.746 2.835-5.97 6.177-5.97 1.6 0 2.444.173 2.845.226v3.792H21.18c-1.817 0-2.156.9-2.156 2.168v2.847h5.045l-.66 3.978h-4.386V29H26.4c.884 0 2.6-1.716 2.6-2.6V2.6c0-.885-1.716-2.6-2.6-2.6z"/></svg>
        </span>
        <span class="rrssb-text">facebook</span>
      </a>
  </li>
  <li class="rrssb-twitter">
      <!-- Replace href with your Meta and URL information  -->
      <a href="https://twitter.com/intent/tweet?text=https://akulubala.github.io//zf2/2013/12/20/ZF2-install-firephp.html"
      class="popup">
        <span class="rrssb-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M24.253 8.756C24.69 17.08 18.297 24.182 9.97 24.62a15.093 15.093 0 0 1-8.86-2.32c2.702.18 5.375-.648 7.507-2.32a5.417 5.417 0 0 1-4.49-3.64c.802.13 1.62.077 2.4-.154a5.416 5.416 0 0 1-4.412-5.11 5.43 5.43 0 0 0 2.168.387A5.416 5.416 0 0 1 2.89 4.498a15.09 15.09 0 0 0 10.913 5.573 5.185 5.185 0 0 1 3.434-6.48 5.18 5.18 0 0 1 5.546 1.682 9.076 9.076 0 0 0 3.33-1.317 5.038 5.038 0 0 1-2.4 2.942 9.068 9.068 0 0 0 3.02-.85 5.05 5.05 0 0 1-2.48 2.71z"/></svg>
        </span>
        <span class="rrssb-text">twitter</span>
      </a>
  </li>
       <li class="rrssb-googleplus">
        <!-- Replace href with your meta and URL information.  -->
        <a href="https://plus.google.com/share?url=https://akulubala.github.io//zf2/2013/12/20/ZF2-install-firephp.html" class="popup">
          <span class="rrssb-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M21 8.29h-1.95v2.6h-2.6v1.82h2.6v2.6H21v-2.6h2.6v-1.885H21V8.29zM7.614 10.306v2.925h3.9c-.26 1.69-1.755 2.925-3.9 2.925-2.34 0-4.29-2.016-4.29-4.354s1.885-4.353 4.29-4.353c1.104 0 2.014.326 2.794 1.105l2.08-2.08c-1.3-1.17-2.924-1.883-4.874-1.883C3.65 4.586.4 7.835.4 11.8s3.25 7.212 7.214 7.212c4.224 0 6.953-2.988 6.953-7.082 0-.52-.065-1.104-.13-1.624H7.614z"/></svg>            </span>
          <span class="rrssb-text">google+</span>
        </a>
      </li>
</ul>
	    </div>
		<script>
var idcomments_acct = '859208dcdebee7bdcf5d5c49acaac3ad';
var idcomments_post_id =  "_zf2_2013_12_20_ZF2_install_firephp";
var idcomments_post_url = "/zf2/2013/12/20/ZF2-install-firephp.html";
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript' src='https://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>
	</div>
</main>
<ul id='category-lists' class='dropdown-content'>

	<li><a href="/posts/php.html">PHP</a></li>

	<li><a href="/posts/javascript.html">Javascript</a></li>

	<li><a href="/posts/jquery.html">JQuery</a></li>

	<li><a href="/posts/vuejs.html">Vuejs</a></li>

	<li><a href="/posts/docker.html">Docker</a></li>

	<li><a href="/posts/mysql.html">Mysql</a></li>

	<li><a href="/posts/mongodb.html">Mongodb</a></li>

	<li><a href="/posts/zf2.html">Zend Framework 2</a></li>

	<li><a href="/posts/laravel.html">laravel</a></li>

	<li><a href="/posts/git.html">Git</a></li>

	<li><a href="/posts/system.html">System Skills</a></li>

	<li><a href="/posts/redis.html">Redis</a></li>

	<li><a href="/posts/python.html">Python</a></li>

</ul>
<footer>
    <div class="container">
      <div class="valign-wrapper">
          <h6>© 2017 @akulubala, INC. All Rights Reserved.</h6>
      </div>
    </div>
</footer>
<script type="text/javascript">
	window.store = {
	    
	      "docker-2017-07-20-docker-a-lemp-environment-with-ubuntu-html": {
	      	"imgSrc": "/assets/images/upsplash/image_1.jpeg",
	        "title": "Docker A LEMP With Laravel In Ubuntu",
	        "author": "",
	        "category": "docker",
	        "content": "### Docker A LEMP With Laravel In Ubuntu---1. #### Set up docker, Documents from official site : [Docker.com](https://store.docker.com/editions/community/docker-ce-server-ubuntu?tab=description \"Docker\").   - ##### Set up the repository     {% highlight php %}     ```       sudo apt-get -y install \\       apt-transport-https \\       ca-certificates \\       curl       curl -fsSL https://download.docker.com/linux/ubuntu/gpg | \\        sudo apt-key add -       sudo add-apt-repository \\       \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\       $(lsb_release -cs) \\       stable\"       sudo apt-get update     ```          {% endhighlight %}   - ##### Get Docker CE (community edition)     {% highlight php %}     ```     sudo apt-get -y install docker-ce     ```     {% endhighlight %}        - ##### Test your Docker CE installation     {% highlight php %}     ```     sudo docker run hello-world     ```      {% endhighlight %}        - ##### use non root user run docker command (add user ray to group docker)     {% highlight php %}     ```     sudo usermod -aG docker ray     ```     {% endhighlight %}   - ##### check user group (command will list ray to docker group)     {% highlight php %}     ```     id ray     ```     {% endhighlight %}2. #### Set up LEMP(linux,nginx,php,mysql) environment       ***basic we just need nginx, php, mysql run on a linux server***      **get access container:** `docker exec -it  /bin/bash`      - ##### Create folder and files:        - ##### Docker-Compose file: docker-compose.yml      {% highlight php %}      ```      version: \"3\"        services:          nginx:            container_name: docker-nginx            image: nginx:latest            ports:              - \"80:80\"            links:              - php # links let service php can communicate with nginx            volumes:              - ./nginx:/etc/nginx/conf.d  # map nginx server to container server configuration              - ./logs/nginx-error.log:/var/log/nginx/error.log  # map nginx error to local file              - ./logs/nginx-access.log:/var/log/nginx/access.log # map nginx access log to local file              - ./www:/var/www/html          php:            container_name: docker-php            image: php:7.1-fpm            build:              context: ./php ## folder contains dockerfile definations              dockerfile: Dockerfile ## dockerfile define php            ports:              - \"9000:9000\"            links:              - mysql            volumes:                # map www foler to php server /var/www/html. note: because docker php              - ./www:/var/www/html # make this folder as root folder, so this can't be changed              - ./php/custom-php.ini:/usr/local/etc/php/custom-php.ini # use this map to change php.ini configuration          mysql:            container_name: docker-mysql            image: mysql:5.7            ports:              - \"3306:3306\"            environment:              MYSQL_DATABASE: 'databasename'              MYSQL_ROOT_PASSWORD: 'password'            command: mysqld --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci        ```     - ##### Dockfile defination        ```        FROM php:7.1-fpm        RUN apt-get update && apt-get install -y \\                libfreetype6-dev \\                libjpeg62-turbo-dev \\                libmcrypt-dev \\                libpng12-dev \\            && docker-php-ext-install -j$(nproc) iconv mcrypt \\            && docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/ \\            && docker-php-ext-install -j$(nproc) gd \\            && docker-php-ext-install pdo pdo_mysql        ```        {% endhighlight %}        By default, docker image php don't have 'pdo, pdo_mysql', so we define this dockfile        install them by using `docker-php-ext-install pdo pdo_mysql`            - ##### Test Installation            After Create folder and finish docker-compose config,      Just Run `docker-compose up -d`      Then `docker-compose ps`            get service status like this:      3. #### Set up laravel    Set up Laravel don't need much extro operations. just run command     `laravel new laravel-example-site` under foler 'www'        **Notice: composer and npm commands can just run from host machine, only if they are avaliable**                                ",
	        "url": "/docker/2017/07/20/docker-a-lemp-environment-with-ubuntu.html"
	      }
	      ,
	    
	      "python-2014-11-24-python-decorator-html": {
	      	"imgSrc": "/assets/images/upsplash/image_2.jpeg",
	        "title": "Python Decorator",
	        "author": "",
	        "category": "python",
	        "content": "python decorator 大概是每个pythoner比看到内容吧.顾名思义：“装饰器”，绝对是把什么什么东西通过另外的东西修饰了一番。####先来看下最基本的显而易见的例子吧：{% highlight python %}        def log(func):            def wrapper(*args, **kw):                print 'call %s():' % func.__name__                func(*args, **kw)---            return wrapper        @log        def now():            print '2013-12-25'        now(){% endhighlight %}    @log就是所谓的语法糖，从上例最终的表现形式就是：将now()函数传给了方法log..最终调用是 调用了内部函数wrapper..接下来一步步刨析：  log函数内部有个wrapper函数，这样就形成了一个闭包wrapper,这个函数对于其他部分是一个独立的模块，但其可以使用log的参数也就是传进来的方法func,func在log内部是相当于warpper是全局变量（log 内部的作用域）经过wrapper的处理后,now函数就不再是单单输出“2013-12-25”了。所以也验证了前面所说的经过某某修饰成为了另外的某某某。相当于`now = log(now())`**如果前面的例子打印`now.__name__`,结果为：wrapper 而不是now**为了解决这个问题，需要如下操作：{% highlight python %}    from functools import wraps    def log(func):    \t@wraps(func)        def wrapper(*args, **kw):            print 'call %s():' % func.__name__            func(*args, **kw)---        return wrapper{% endhighlight %}**如果now 函数需要传参数的话需要反射来处理，具体可看http://coolshell.cn/articles/11265.html**####以上是一个最基本的decorator 应用，接下来说明在使用decorator时传参    {% highlight python %}    from functools import wraps    def log(args1,args2):        def real_decorator(func):            @wraps(func)            def wrapper(*args, **kw):                print 'call %s():' % func.__name__                func(args1, args1,args)            return wrapper        return real_decorator    @log(\"log pass paramter1 to log\",\"log pass paramter2 to log\")    def now(*args):        print args        print '2013-12-25'    now(\"now pass parameter to wrapper\")    print now.__name__    result :>call now():>('log pass paramter1 to log', 'log pass paramter1 to log', ('now pass parameter to wrapper',))  >2013-12-25  >now{% endhighlight %}说明对于需要使用语法糖 传参的时候需要返回一个函数real_decorator，再在内部定义具体调用的函数wrapper这里相当于：`log(\"log pass paramter1 to log\",\"log pass paramter2 to log\")((now())`####使用多个decorator:  {% highlight python %}    from functools import wraps    def log(args1,args2):        def real_decorator(func):            @wraps(func)            def wrapper(*args, **kw):                print 'call %s():' % func.__name__                func(args1, args1,args)            return wrapper        return real_decorator    def another_log(func):        def wrapper(pams):            print \"another wrapper of %s():\\n\" % func.__name__+pams        return wrapper        @another_log    @log(\"log pass paramter1 to log\",\"log pass paramter2 to log\")    def now(*args):        print args        print '2013-12-25'    now(\"now pass parameter to wrapper\")    print now.__name__    results:  >another wrapper of now():  >now pass parameter to wrapper  >wrapper{% endhighlight %}说明：结果是 输出了 another_log 的内容，那么它是将log decrator 过后的方法再次 decorator，即如下形式：`another_log(log(param1,param2)(now))`,也就是两层包装  ####类式的 Decorator{% highlight python %}    class TestDecorator(object):        def __init__(self,func):            self.decorator_fn = func        def __call__(self):            print self.decorator_fn.__name__            self.decorator_fn()            print \"inside myDecorator.__call__()\"    @TestDecorator            def now():        print \"2014-01-01\"    now(){% endhighlight %}基本的实例如上，在这个类中必须要有__call__方法，而所有关于修饰的内容都应当从__call__方法里面去定义  输出：  >now  >2014-01-01  >inside class __call__()  一个好的完整例子：  {% highlight python %}    class MyApp():        def __init__(self):            self.func_map = {}        def register(self, name):            def func_wrapper(func):                self.func_map[name] = func                return func            return func_wrapper        def call_method(self, name=None):            func = self.func_map.get(name, None)            if func is None:                raise Exception(\"No function registered against - \" + str(name))            return func()    app = MyApp()    @app.register('/')    def main_page_func():        return \"This is the main page.\"    @app.register('/next_page')    def next_page_func():        return \"This is the next page.\"    print app.call_method('/')    print app.call_method('/next_page'){% endhighlight %}1）上面这个示例中，用类的实例来做decorator。  2）decorator类中没有__call__()，但是wrapper返回了原函数。所以，原函数没有发生任何变化。更多例子：https://wiki.python.org/moin/PythonDecoratorLibrary",
	        "url": "/python/2014/11/24/python_decorator.html"
	      }
	      ,
	    
	      "php-2014-07-07-decade-user-id-strategy-html": {
	      	"imgSrc": "/assets/images/upsplash/image_3.jpeg",
	        "title": "十位用户唯一ID生成策略",
	        "author": "",
	        "category": "php",
	        "content": "新浪微博和twitter 等系统都有一窜数字ID来标示一个唯一的用户,这篇文章就是记录如何实现这种唯一数字ID    >原理：使用MYSQL 自增ID 拼接任意字符..然后使用进制转换打乱规则>一般来说实现唯一性可以使用uniqid 或者time之类的方式生成，>但是考虑到多台系统，也就是分布式系统。这种方式就不准确了。实现：新建一个数据库：{% highlight php %}    CREATE TABLE `user_number_id` (      `id` bigint(20) unsigned NOT NULL auto_increment,      `stub` char(1) NOT NULL default '',      PRIMARY KEY  (`id`),      UNIQUE KEY `stub` (`stub`)    ) ENGINE=MyISAM{% endhighlight %}    使用replace into 来取得生成的ID{% highlight php %}    REPLACE INTO Tickets64 (stub) VALUES ('a');    SELECT LAST_INSERT_ID() as number_id;{% endhighlight %}取得number_id后生成十位数字ID{% highlight php %}    function auID($autoID)    {        $autoID = $autoID;        $autoCharacter = array(\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"A\",\"B\",\"C\",\"D\",\"E\");        $len = 7-((int)log10($autoID) + 1);        $i=1;        $numberID = mt_rand(1, 2).mt_rand(1, 4);        for($i;$i这里因为autoid永远不可能为E所以使用E来分割保证不会重复    }{% endhighlight %}base_convert 转换16进制到10进制，只要16进制不同那么10进制就一定不同，因为10位十进制最大可取范围：9999999999转换成16进制是2540BE3FF所以前两位可取值是固定的mt_rand(1, 2).mt_rand(1, 4)以下是测试用例表明没有重复(内存问题只测到55万)：{% highlight php %}        static $array=array();        for($j=1;$j<=550000;$j++)        {            $array[] = auID($j);        }                        print_r(count(array_unique($array)));                function array_repeat($arr)         {            if(!is_array($arr)) return $arr;                          $arr1 = array_unique($arr);                          $arr3 = array_diff_key($arr,$arr1);                        return array_unique($arr3);         }                print_r(array_repeat($array));{% endhighlight %}考虑到可能会有主从需求,id生成应该去取同一个数据表的数据，或者设置好自增id，如主服务器1357，从服务器2468参考：[http://code.flickr.net/2010/02/08/ticket-servers-distributed-unique-primary-keys-on-the-cheap/][1]  [1]: http://code.flickr.net/2010/02/08/ticket-servers-distributed-unique-primary-keys-on-the-cheap/",
	        "url": "/php/2014/07/07/decade-user_id-strategy.html"
	      }
	      ,
	    
	      "system-2014-06-27-ubunto-deploy-jekyll-html": {
	      	"imgSrc": "/assets/images/upsplash/image_4.jpeg",
	        "title": "Ubunto Deploy Jekyll",
	        "author": "",
	        "category": "system",
	        "content": " 1. Download and install ruby                sudo mkdir Downloads        curl -O http://cache.ruby-lang.org/pub/ruby/2.1/ruby-2.1.2.tar.gz         tar -zxvf ruby-2.1.2.tar.gz -C ../        cd ..        sudo chown -R ray ruby-2.1.2        sudo chgrp -R ray ruby-2.1.2        cd ruby-2.1.2        ./configure  ---->error no gcc installed        Install gcc            sudo apt-get install gcc        gcc -v ---->gcc version 4.8.2        sudo apt-get install build-essential -->this is needed for gcc to find software infomation                 ./configure        sudo make&make install        Install rubygem            culr -O http://production.cf.rubygems.org/rubygems/rubygems-2.3.0.tgz        tar -zxvf rubygems-2.3.0.tgz -C ../        sudo chown -R ray rubygems-2.3.0        sudo chgrp -R ray rubygems-2.3.0 2. Install jekyll        OK...stupid things came out:    **first error said i need zlib..**        then install zlib            sudo apt-get install zlib1g-dev        and rebuild ruby ,rubygems        **Second error said i need openssl**     because i do not have openssl installed..             sudo apt-get install libssl0.9.8        sudo apt-get install libssl-dev        then rebuild ruby,ruby gems..        Third error said need javascript runtime..    here have some illustration [https://github.com/jekyll/jekyll/issues/2327][1]    but i think it's jekyll problem ,it's ask us use coffescript            gem install execjs        sudo apt-get install nodejs        Finally,finished..        jekyll -v --->ok 3. Deploy my blog        sudo apt-get install git        git clone git@github.com:akulubala/akulubala.github.io.git        some error because i don't have some plug-in defined in my Gemfile            just gem install xx        then ./deploy        see my blog ok... 4. SSH and Sftp            sudo apt-get install openssh-server        cd /etc/ssh/        sudo cp sshd_config sshd_config.defaults_bak--->backup file        sudo vim sshd_config        unmake PasswordAuthentication         sudo restart ssh    then open terminal :    login system or filezila login    [1]: https://github.com/jekyll/jekyll/issues/2327",
	        "url": "/system/2014/06/27/Ubunto_Deploy_Jekyll.html"
	      }
	      ,
	    
	      "mysql-2014-05-12-mysql-procedure-html": {
	      	"imgSrc": "/assets/images/upsplash/image_5.jpeg",
	        "title": "Mysql 存储过程举例",
	        "author": "",
	        "category": "mysql",
	        "content": "1. 创建过程：       必须具有CREATE ROUTINE权限，并且ALTER ROUTINE和EXECUTE权限被自动授予它的创建者。   两种方式，及参数语法说明：        CREATE PROCEDURE sp_name ([proc_parameter[,...]])            [characteristic ...] routine_body                 CREATE FUNCTION sp_name ([func_parameter[,...]])            RETURNS type            [characteristic ...] routine_body                        proc_parameter:            [ IN | OUT | INOUT ] param_name type->IN 传入参数，OUT 传出参数,INOUT 即可传入又可传出                        func_parameter:            param_name type                 type:            Any valid MySQL data type                 characteristic:            LANGUAGE SQL          | [NOT] DETERMINISTIC          | { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }          | SQL SECURITY { DEFINER | INVOKER }          | COMMENT 'string'                 routine_body:            Valid SQL procedure statement or statements2. 查看及删除        查看：        SHOW CREATE PROCEDURE `procedure name`        SHOW CREATE FUNCTION  `function name`        删除：        DROP PROCEDURE/FUNCTION [if exists]  procedure/function_name   3. 变量        1) 用户变量：                set @var 若没有指定GLOBAL 或SESSION ，那么默认将会定义用户变量，        如 set @a =3,@a:=5；set @f := select f from table         用户变量跟mysql客户端是绑定的，设置的变量，只对当前用户使用的客户端生效                2) 全局变量：                定义时，以如下两种形式出现，set GLOBAL 变量名  或者  set @@global.变量名         对所有客户端生效。只有具有super权限才可以设置全局变量                3) 局部变量：作用范围在begin到end语句块之间。在该语句块里设置的变量                declare语句专门用于定义局部变量。set语句是设置不同类型的变量，包括会话变量和全局变量                4) 会话变量：        只对连接的客户端有效。set session varname = value; shwo session variable 来查看 4. 例一：        DELIMITER $$ #定义结束标志        DROP PROCEDURE IF EXISTS `pr_add`;$$        #创建存储过程        CREATE PROCEDURE `pr_add`()             BEGIN                                     declare n int default 0;                        declare bb int;                  DECLARE cur_1 CURSOR FOR SELECT action_id FROM useraction where uid=xxx;//取得游标，相当于数字的key                  DECLARE CONTINUE HANDLER FOR NOT FOUND SET n = 1;//如果记录取完，游标设置为1；                           OPEN cur_1;                  FETCH cur_1 INTO bb;                  while n1 do                                     replace into useraction set action_id=bb,uid=xxx;                          FETCH cur_1 INTO bb; /*取下一条记录，游标每取一次会自动向后进一*/                      end while;                      close cur_1;             END$$        DELIMITER ;        #调用存储过程        CALL pr_add();5. 例二        DELIMITER $$ #定义结束标志                DROP PROCEDURE IF EXISTS `curdemo`;$$                #创建存储过程        CREATE PROCEDURE curdemo()        BEGIN          DECLARE done INT DEFAULT 0;-->declare这个语句被用来声明局部变量。要给变量提供一个默认值，请包含一个DEFAULT子句          DECLARE a CHAR(16);          DECLARE b,c INT;          DECLARE cur1 CURSOR FOR SELECT id,data FROM test.t1;-->申明光标cur1          DECLARE cur2 CURSOR FOR SELECT i FROM test.t2;          DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET done = 1;                   OPEN cur1;          OPEN cur2;          REPEAT-->REPEAT语句内的语句或语句群被重复，直至search_condition 为真            FETCH cur1 INTO a, b;-->这个语句用指定的打开光标读取下一行（如果有下一行的话），并且前进光标指针。            FETCH cur2 INTO c;            IF NOT done THEN               IF b uid);                 $sql = sprintf(\"select @m1 as award_type,@m2 as distribute_date\");         官方文档：[http://dev.mysql.com/doc/refman/5.1/zh/stored-procedures.html][1]  [1]: http://dev.mysql.com/doc/refman/5.1/zh/stored-procedures.html",
	        "url": "/mysql/2014/05/12/MYsql_procedure.html"
	      }
	      ,
	    
	      "php-2014-05-06-click-image-upload-php-mongodb-extension-html": {
	      	"imgSrc": "/assets/images/upsplash/image_6.jpeg",
	        "title": "php 添加mogodb扩展+PHP点击图片上传并实现预览效果",
	        "author": "",
	        "category": "php",
	        "content": "####PHP添加扩展MongoDBPHP添加扩展的方式大致都是一致的，这里记录下今天安的这个，免得改天又忘了。\t\ttar zxvf mongo-1.5.1.tgz -C ../\t\tcd mongo-1.5.1/\t\tphpize\t\t./configure --with-php-config=/usr/local/php/bin/php-config\t\tmake clean->这里有时候会报错所以需要这步，看情况来吧\t\tmake\t\tmake install\t\textension=mongo.so####PHP点击图片上传并实现预览效果（主要记录这个）客户端代码：                                            click image upload                                                                                                                                -->如果想要实现无刷新上传，直接写Iframe IE下会报错，所以还是建议用jquery插件来实现                                   服务端代码：        注意ie8以下不支持data:image/png;base64这样的数据，所以如果需要IE8以下浏览器，请直接使用图片地址        echo '';",
	        "url": "/php/2014/05/06/click_image_upload_&amp;_php_mongodb_extension.html"
	      }
	      ,
	    
	      "mongodb-2014-04-22-mongodb-install-html": {
	      	"imgSrc": "/assets/images/upsplash/image_7.jpeg",
	        "title": "Mongodb 安装过程",
	        "author": "",
	        "category": "mongodb",
	        "content": "官方文档在这里：http://docs.mongodb.org/manual/tutorial/install-mongodb-on-linux/首先需要知道,mongod是服务进程,mongo是客户端进程1.下载解压（可以自由发挥）    curl -O http://downloads.mongodb.org/linux/mongodb-linux-x86_64-2.6.0.tgz    tar -zxvf mongodb-linux-x86_64-2.6.0.tgz -C /usr/local/    mv mongodb-linux-x86_64-2.6.0.tgz mongodb    2.建立配置文件及数据存放目录：    /usr/local/mongodb/bin/mongodb.conf->配置文件    /usr/local/mongodb/db->数据存放目录    /usr/local/mongodb/log/mongodb.log->log 文件    3.配置文件内容：    dbpath=/usr/local/mongodb/db    logpath=/usr/local/mongodb/log/mongodb.log    logappend=true    fork=true->后台demon运行4.启动..需要配置环境变量以何种身份运行mongod，root的话切换到root 编辑~/.bashrcexport PATH=$PATH:/usr/local/mongod/bin    mongod->启动命令5.测试安装状况:    mongo    db.version();    ",
	        "url": "/mongodb/2014/04/22/Mongodb_Install.html"
	      }
	      ,
	    
	      "php-2014-04-21-laravel-details-html": {
	      	"imgSrc": "/assets/images/upsplash/image_8.jpeg",
	        "title": "Laravel 框架开发配置概述",
	        "author": "",
	        "category": "php",
	        "content": "使用框架的好处简直太多了，便于管理，加速开发，使用新理念新技术。Laravel 4基于PHP 5.3以上开始的。###1.命名空间:namespace{% highlight php %}        namespace Stark;        class Test{        }                其他文件（首先需要加载进来）：        use Stark\\Test;        $eddard = new Test();                或者不引入直接(全局引用方式):        $eddard = new Stark\\Test();{% endhighlight %}文件目录结构，如：library/Stark一般都会有自动加载将library下面的所有文件加载  ###2.Closures{% highlight php %}    $x = \"a\";        $y = \"b\";        $z = \"c\";         $greet = function($params) use($x,$y,$z)     {         echo  $params;         return $x.$y.$z;              };         $greet(\"abc\");        function x($a){        var_dump($a);    }\tfunction y($x)\t{\t\t$w = $x(\"xyz\");\t\tvar_dump($w);\t}    x($greet);\ty($greet);{% endhighlight %}匿名函数第一个括号是调用时传的参，第二个是创建是传的参，运行上面的小例子，结果：{% highlight php %}\tabc\tobject(Closure)[1]\txyz\tstring 'abc' (length=3){% endhighlight %}###3.composer 使用  安装过程就不说了，直接看官方文档.https://getcomposer.org/book.pdf composer配置文件是基于json的，例如我要安装一个monolog(手册上例子)： 在根目录monolog-demo下面建立一个composer.josn文件，内容： {% highlight php %}     {    \t\"require\" : {    \t\t\"monolog/monolog\": \"1.2.*\"    \t}    }{% endhighlight %}    然后使用命令：composer install，就可以完成下载及安装了 下载完成后会多了一个vendor目录，里面有个monolog 目录了。 composer的配置项有很多，但最重要的就是 这个require和autoload配置了。 composer的自动加载机制基于 PSR-0/4 也就是说在  {% highlight php %}    \"autoload\": {\t\t\"classmap\": [\t\t],        \"psr-4\": {                \"\": [\"app/module/\",\"app/library\"]         },        \"psr-0\": {        },        \"psr-1\":{        },        \"psr-2\":{        },        \"psr-3\":{        }    } {% endhighlight %} 关于psr具体介绍看这里：http://www.php-fig.org/faq/ 注：我自己添加了psr-4将app/module/ 和app/library加入了自动加载中。psr-0的namespace和目录是对应的,psr-4不需要对应namaspace 例如：         \" Monolog \\\\\": \"src /\",//psr-0对应的目录是src/Monolog,psr-4对应src        \" Vendor \\\\ Namespace \\\\\": \"src /\",//psr-0对应的目录是src/Vendor/namespace,psr-4对应src        \" Vendor_Namespace_ \": \"src /\"//psr-0对应的目录是src/Vendor_Namespace_,psr-4对应src  classmap是机制会自动搜索.inc和.php文件或者搜索特定文件：            \" classmap \": [\" src /\", \"lib /\", \" Something .php \"]###4.安装Laravel（其实现在大多数框架的安装方式都是类似的）         composer create-project laravel/laravel laravel-demo-name//这一步仅仅是下载了laravel应用程序包        composer install//这一步是根据composer 下载依赖包 上面两部完成之后就有了个vendor目录这个就是composer 包管理的所有文件。还有两个命令     composer self-update //更新依赖包    composer dump-autoload //更改过composer.json 配置文件后需要执行这个,重新生成autolod文件         接下来配置 rewrite（下面是个标准的nginx配置，框架自带的有apache配置）： {% highlight php %}    server {        # Port that the web server will listen on.    listen 80        # Host that will serve this project.    server_name app.dev        # Useful logs for debug.    access_log /path/to/access.log;    error_log /path/to/error.log;    rewrite_log on;        # The location of our projects public directory.    root /path/to/our/public;        # Point index to the Laravel front controller.    index index.php;        location / {    # URLs to attempt, including pretty ones.    #按顺序检查文件是否存在，返回第一个找到的文件    #结尾的斜线表示为文件夹-$uri/。如果所有的文件都找不到，会进行一个内部重定向到最后一个参数        #例如try_files /app/cache/ $uri @fallback;        #它将检测$document_root/app/cache/index.php,$document_root/app/cache/index.html    #和$document_root$uri是否存在，如果不存在着内部重定向到 @fallback                    try_files $uri $uri/ /index.php?$query_string;    }        # Remove trailing slash to please routing system.    if (!-d $request_filename) {     rewrite ^/(.+)/$ /$1 permanent;    }        # PHP FPM configuration.    location ~* \\.php$ {    fastcgi_pass unix:/var/run/php5-fpm.sock;    fastcgi_index index.php;    fastcgi_split_path_info ^(.+\\.php)(.*)$;    include /etc/nginx/fastcgi_params;Getting Started 46    fastcgi_param SCRIPT_FILENAME $document_root$\\    fastcgi_script_name;    }        # We don't need .ht files with nginx.    location ~ /\\.ht {    deny all;    }        } {% endhighlight %}###5.框架分析与配置 框架结构目录：         • app/-->所有代码自己的代码都是在这里面的            • commands/-->自己创建Artisan 命令文件目录            • config/-->以数组形式存放的一系列配置信息，包括db，router等等            • controllers/-->controller文件夹            • database/-->如果使用命令行操作方式，关于数据库建库过程，表关系 等等文件，以备将来使用或者迁库            • lang/-->国际化配置文件夹，翻译用的            • models/-->数据模型            • start/-->应用程序启动配置，区别于bootstap            • storage/-->本地化存储，包括sesion，view,cache等等            • tests/-->所有写的基于phpunit的测试文件            • views/-->模板目录            • filters.php-->路由过滤控制方法            • routes.php-->非常重要的,所有框架路由都在这一个文件中        • bootstrap/-->框架启动的配置都在这个目录里面        • vendor/-->框架的依赖包以及第三方包        • public/-->静态文件目录        • artisan-->可执行的文件，包括一些列laravel框架快捷操作方式        • composer.json-->composer 配置文件        • composer.lock        • phpunit.xml-->phpunit test 的配置文件        • server.php-->开发中的未来需要的   框架启动，路由(写在routes.php)里,我这里写过几个，过多的还是 去看手册：        Route::get('/games/csol', 'Csol\\Fight\\Controller\\IndexController@showWelcome');    Route::get('/cp', 'Cp\\CallBack\\Controller\\IndexController@showWelcome');        Route::Group(array(\"namespace\"=>\"Test\\Eloquent\\Controller\",'prefix' => 'test'),function(){        Route::resource('curd', \"IndexController\");    });    Route::Group(array(\"namespace\"=>\"Test\\Wechart\\Controller\",\"prefix\"=>\"wechart\"),function(){        Route::get('/curl',function(){            $ch = curl_init();                // 设置URL和相应的选项            curl_setopt($ch, CURLOPT_URL, \"http://laravel/wechart/recieve?ss=fdsdf\");            curl_setopt($ch, CURLOPT_HEADER, 0);            // 抓取URL并把它传递给浏览器            curl_exec($ch);                // 关闭cURL资源，并且释放系统资源            curl_close($ch);        });        Route::get(\"/recieve\",function(){            $response = Response::make();            $response->setContent(\"Hello world a!\");            $response->setStatusCode($response::HTTP_OK);            $response->headers->set('Content-Type', 'text/html');            return $response;        });    });    -->上面是个例子，curl 会请求recieve route,recieve 返回一个自定义相应    Route::Group(array(\"prefix\"=>\"games/portal\"),function(){        Route::Group(array(\"namespace\"=>\"Portal\\StewardPoint\\Controller\"),function(){            Route::get(\"/steward_point\",\"IndexController@index\");            Route::get(\"/steward_point_get\",\"IndexController@getPoint\");        });    });        目前我的项目路径，分层分结构如下：      ![enter image description here][1]    结构比较清晰，代码部分一般都在module和library Tiancity下面。  Library下面有个CustomFacade ，说到这个就引出一个Laravel非常重要的东东了。Facade..    ###6.核心理念Facade和IOCLaravel 里面许多东西都是以Facede形式存在的(外观模式),从Routers.php文件看到rouget::method方式调用方法，如果深入去找这个方法，是找不到具体方法的，最终会找到这个目录：vendor/laravel/framework/src/Illuminate/support/facades/ 在这个文件夹下所有的文件都是一个假的类用来做外观的。这也是laravel的 所有可以使用facade的类。知道了Facade这个东西，现在来说说如何使用Facade。    首先需要另一个概念：IOC容器，直接把它理解为一个管理类的容器就可以了，现在一个比较好的设计是依赖注入，使用个例子来说明IOC：   {% highlight php %}     class Foo{        private $string = \"i'm foo\";        protected $bar;            public function __construct(Bar $bar) {            $this->bar = $bar;        }    }          class Bar{        private $porperty = \"i'm bar'\";        }        class Ioc{                private static $register = array();                public static function bind($name,  callable $resover)        {            static::$register[$name] = $resover;        }                public function make($name)        {            if(isset(static::$register[$name]))            {                $resolver = static::$register[$name];                return $resolver();            }            throw new Exception(\"No class found!\");        }    }        Ioc::bind(\"foo\", function(){        return new Foo(new Bar());        });        $foo = Ioc::make(\"foo\");    echo \"\";    var_dump($foo);    echo \"\";{% endhighlight %}上面这个例子说明了一个基本的IOC绑定及使用原理，Laravel使用比这个复杂多的容器，可以去阅读Illuminate\\Container\\Container类    我们在Laravel里使用的时候首先需要注册服务组件里面    {% highlight php %}    namespace TianCity\\CustomFacade;    use Illuminate\\Support\\ServiceProvider;    use TianCity\\Tools;    use TianCity\\Common;//注意这里，这个文件就是我们可以任意写方法的类，如Common::test(),就会调用该类的方法    class TiancityServiceProvider extends ServiceProvider {        //put your code here            /**         * Register the binding         *         * @return void         */        public function register()        {            $app = $this->app;            $app->bind(\"Common\",function(){                return new Common();            });            $app->bind(\"Tools\",function(){                return new Tools();            });        }    }    {% endhighlight %}还需要到config/app.php里面providers数组里面加入：'TianCity\\CustomFacade\\TiancityServiceProvider'    服务组件是框架引导的时候自动加入的，也就是说 框架加载的时候会有个bind动作，不然你需要手动bind  然后像前面提到的Facade一样：    {% highlight php %}    namespace TianCity\\CustomFacade;    use Illuminate\\Support\\Facades\\Facade;    use App;    class Common extends Facade{        //put your code here         protected static function getFacadeAccessor() {                 return App::make('Common');         }    }    OK...Facade 搞定    {% endhighlight %}###7.Filter  加一个Controller 里使用Filter检查是否开放外服 IP的方法：     {% highlight php %}     Route::filter(\"open_ip\",function(){        $args = func_get_args();        $openIP = array_pop($args);                    $ip = sprintf(\"%u\", ip2long(htmlspecialchars($_SERVER['REMOTE_ADDR'])));        $net_c = sprintf(\"%u\", ip2long(\"192.168.255.255\")) >> 16;        $local = sprintf(\"%u\", ip2long(\"127.0.0.1\")) >> 16;        $intern = false;        if(($ip >> 16 === $net_c) || ($ip >> 16 === $local))        {            $intern = true;        }        if(intval($openIP) === 0 && !$intern)        {            $response = Response::make();            $response->setContent(\"对外IP尚未开放！\");            $response->setStatusCode($response::HTTP_OK);            $response->headers->set('Content-Type', 'text/html');            return $response;        }    });    {% endhighlight %}        调用方式：        //根据传入的$open_ip来决定是否对外开放    {% highlight php %}        $this->beforeFilter(\"open_ip:$open_ip\");    {% endhighlight %}就先这些吧...后面空了 再写Model和View..Eloquent active Record 好东东啊...  [1]: http://192.168.56.101:4000/images/2014/laravel_tutorial_1.jpg",
	        "url": "/php/2014/04/21/Laravel_details.html"
	      }
	      ,
	    
	      "php-2014-04-19-php-image-way-web-shell-1-html": {
	      	"imgSrc": "/assets/images/upsplash/image_9.jpeg",
	        "title": "PHP上传shell注入(一)",
	        "author": "",
	        "category": "php",
	        "content": " 1. 首先准备上传文件phpinfo.php{% highlight php %}这里是命令行结果,太小不截图了{% endhighlight %}    使用vim 查看一个gif文件：        vim -b filename.gif //-b选项不加查看的时候会自动加上0x0a回城符        :%!xxd        //查看完了需要使用%！xxd -r 是还原二进制文件到文本模式    执行完上面两步后：    ![enter image description here](http://akulubala.github.io/public/images/2014/web_shell_2.png)    看到最后一栏有GIF89a的字样，这个就是gif标识文件格式的地方。      打开phpinfo.php    再第一行加入GIF89a几个字符(也可以编辑头六个字节：47 49 46    38 39 61，建议使用GHex)，注意这里使用编辑器编辑最好是替换，因为二进制文件排列是紧密的块形式        然后再使用file phpinfo.php命令查看得到：         ray@ubuntu:/var/www/test$ file phpinfo.php         phpinfo.php: GIF image data, version 89a, 15370 x 28735    看来文件已经变成了GIF了但是文件大小却不对，从gif wiki    上看到头六个字节表示GIF89a，第7,8（000006-000007），9,10(000008,000009)个字节表示图片大小            6:     03 00        3            - logical screen width in pixels        8:     05 00        5            - logical screen height in pixels    更改想要的大小如0001,0001，再使用file 查看文件大小就变成了\"1\\*1\"了        更改完成再次进行第三步中的curl操作，可以发现已经可以正常上传这个假的图片文件了。        更改PNG文件类似，但是PNG的头信息和gif不同：          文件头：由八个字节组成，0x89504e470d0a1a0a        数据块：每个数据块由四部分构成，他们的描述依次如下：        Length ：占四字节，表示数据块data域占多少个字节。（注意这里不包括length自身）        Type ：占四字节，表示当前块的类型。一般是英文大小写字母的ASCII码（65～9>0或者97～122）        Data：数据区。大小可以是0字节        CRC：占四个字节，整个chunk的CRC校验码（Length+Type+Data）     ![enter image description here](http://akulubala.github.io/public/images/2014/web_shell_3.png)    除去头文件信息是第一行前八个字节外，其他信息依次4个字节表示 5. 上传真正的shell脚本    出名的shell脚本从这里可以找到：      http://www.r57shell.net/      里面有个C999的源码翻译过来的      http://mikeybeck.com/hacking/viewC999.php    今天就到这里吧...好困了。。",
	        "url": "/php/2014/04/19/PHP-image-way-web-shell_1.html"
	      }
	      ,
	    
	      "linux-2014-04-11-how-to-set-up-ssh-publick-key-authentication-html": {
	      	"imgSrc": "/assets/images/upsplash/image_10.jpeg",
	        "title": "如何设置SSH的公钥授权",
	        "author": "",
	        "category": "linux",
	        "content": "其实这个问题已经用过好几次了，但是基本上都是用的 时候再去查的，没有一个整体的概念，今天看到篇文章就翻译下来，顺带好好整理下思路：熟悉并能使用SSH的命令行操作对于web开发者来说是件很好的事情，这篇文章就是理解使用SSH命令行的一个进阶。讲解的内容有：    1理解公钥和私钥密码学术语    2隐式的SSH公钥认证和普通密码认证    3创建SSH公钥私钥    4设置好SSH公钥私钥    5不同的方式复制你的公钥到远程服务器    6创建SSH快捷方式####什么是密码学的公钥？>注意：这是个相当简单容易理解的，但是你还是需要明白它具体的细节  SSH是Secure Shell 的缩写，在Linux系统里面最常用的是OpenSSH,幸运的是，只要你不是从逻辑安装linux，否则OpenSSH通常都是预先安装在你的电脑上的，如果没有的话简单的Google一下安装上就可以了。Open SSH是个非常好的东西，因为它允许公钥与私钥配对。公、私钥配对可以应用在各种各样的事务上面，通常的例子有：普通加密，服务器认证，已经Git 认证。公、私钥对从名称来看就知道分公钥和私钥，私钥是不被公开共享的，只有电脑主机拥有。公钥是可以放置在任何一台电脑上，拿来与公钥匹配的。这里有个例子：![enter image description here][1]通过查看上面的例子，可以看到你自己的公钥出现在了DigitalOcean，Linode和GitHub上面，这意味着你的笔记本电脑有和这些电脑通讯，它的私钥将要与与之通讯的这些电脑的私钥做匹配验证，只有验证通过后你的笔记本电脑才可以与他们通讯。这种认证方式只能是但方向的，意味着你的电脑可以访问 Digital Ocean, Linode, 和Github，但是他们却不可以通过匹配公钥访问你的电脑。最后你应该也看到了Linode和Github也有做公私钥匹配，Linode也可以访问Github。这是一个简短的介绍，我很建议有兴趣的同学去阅读以下这些比我这个非专业人士解释的更好的资料（PS.原博主比较谦虚和厚道）： - Wikipedia: Public-key cryptography  - Ubuntu  Docs: Ubuntu  Docs####公钥认证VS普通密码认证从安全层面来讲，这两个有被激烈讨论过。他们两都是保证数据安全的策略，但是哪个更好常常是争论的焦点，最终答案得看你对用户信任度有多高。很多人认为，使用密码认证的时候，用户通常记不住或者不能够被信任，他们认为公、私钥认证的方式比密码认证更安全。但是有些系统管理员却希望禁用公、私钥认证，因为如果用户丢失电脑，那么他们就丢掉了所有在其他电脑上的公钥，除非重新设置公钥。(下面原文有一段比喻。太长了做个简短概况：SSH的公钥认证就类似于你自家的门安装的使用钥匙开门的锁，密码认证就相当于安装了密码锁，使用钥匙开门的锁一旦丢掉了钥匙，很有可能门就不安全了，这时候你得换锁，然后从新给你家人新的钥匙。而密码锁你可以定期的重置密码，做这个比喻的人喜欢密码锁)####创建SSH 公钥、私钥#####首先检查是否有设置过公、私钥    ls -al ~/.ssh如果有看见id_rsa 和 id_rsa.pub，说明你的电脑已经有过公、私钥了，如果没有则执行：    ssh-keygen -t rsa -C \"your-email-here\"    具体细节见GitHub：https://help.github.com/articles/generating-ssh-keys生成好公钥私钥后在~/.ssh目录下面就有了id_rsa 和 id_rsa.pub文件，第一个文件就是私钥,你永远都没有必要操作它。第二个就是你的公钥了，你可以将它放到其他任何一台电脑上####确保远程服务器准备好接受公钥现在我们已经准备好了自己电脑的公钥和私钥，我们需要把公钥复制到远程服务器上用以做匹配，但是首先我们得确保远程服务器上所有东西都准备好了。同样在远程服务器上执行命令：          ls -al ~/.ssh    如果远程服务器没有.ssh文件夹，你可以按照上面讲的步骤来创建它。当创建完毕后你需要创建一个authorized_keys 文件。    cd ~/.ssh    touch authorized_keys接下来确保文件权限设置正确      chmod 700 ~/.ssh    chmod 600 ~/.ssh/authorized_keys    OK。完成之后远程服务器就可以接受你的公钥public key了。在authorized_keys文件中每一行就是一个public key####复制公钥到远程服务器通常来说复制公钥到远程服务器并没有看起来那么简单，这里有些例子讲如何操作它：#####老式的复制方式：如果你有远程服务器权限，你可以直接打开authorized_keys文件然后粘贴你的公钥进去，或者如果你using iTerm on a Mac，你可以通过VIM，vi或者Nano Cli editors 复制粘贴。如果你在Mac电脑上你可以使用以下命令来复制你的公钥到剪切板：    pbcopy 这里的方式(又是一篇博文讲如何操作shell 在window上的),只需要更改user@host就可以了：    cat ~/.ssh/id_rsa.pub | ssh user@host 'cat >> .ssh/authorized_keys'你应该会被提示输入访问远程服务器的密码，输入后就完成了，相当简单灵活的方式完成了。现在远程服务器你打开authorized_keys，你会发现你的公钥在这个文件里面了。然后当你通过ssh链接到远程服务器的时候就不需要再输入密码了。你已经成功的设置了SSH公钥认证。####创建SSH快捷方式到这里，我们已经对公钥私钥认证有了一个基本的理解，我们通过SSH登录远程电脑不需要密码了，最后一件事件我想分享给你的是如何设置SSH快捷方式如果你管理着许多在不同服务器上的网站，将会很困难记住所有这些用户名、密码和、IP地址 和主机名。然后呢，这里有种方式可以创建快捷方式对你所有的网站。例如你可以创建一个快捷方式：    ssh scotch设置这个是相当简单的，在你本地电脑上创建一个config文件到你的~/.ssh文件夹。然后配置如下config：    Host scotch    \tHostName scotch.io    \tUser nick        Host example2    \tHostName example.com    \tUser root        Host myclient    \tHostName 64.233.160.0    \tUser user2ab1    \t        Host myotherclient    \tHostName 64.233.160.0    \tUser userxyz123    \tPort 56000        Host amazon    \tHostName ec2.amazon.com    \tUser ec2-user123    \tPort 12345    \tIdentityFile /path/to/special/privatekey/amazon.pem 现在如果我们输入以下这些命令就可以登录到对应的服务器了：     ssh scotch    ssh example2    ssh myclient    ssh myotherclient    ssh amazon    ####总结：以上就是全部拉！我相信你们很多人已经有过这些经验了。但是如果是第一次做的话上面的内容还是很有用处的。不是所有人都会对服务器有很深的掌握。这篇文章的目的仅仅是带你入门，所有我鼓励你们去学习更多，不要仅仅局限于这篇文章，并且要乐于学习哦！原文链接：http://scotch.io/tutorials/how-to-setup-ssh-public-key-authentication          [1]: http://akulubala.github.io/assets/images/2017/keychart.png",
	        "url": "/linux/2014/04/11/How-To-Set-Up-SSH-Publick-Key-Authentication.html"
	      }
	      ,
	    
	      "php-2014-03-11-php-oauth2-0-douban-html": {
	      	"imgSrc": "/assets/images/upsplash/image_11.jpeg",
	        "title": "PHP OAuth 2.0 认证流程..",
	        "author": "",
	        "category": "php",
	        "content": "####oAuth2.0 授权认证首先官方文档的一个流程如下图(1.0)：     +--------+                               +---------------+     |        |--(A)- Authorization Request ->|   Resource    |     |        |                               |     Owner     |     |        || Authorization |     | Client |                               |     Server    |     |        ||    Resource   |     |        |                               |     Server    |     |        |豆瓣登陆来说明上面流程,第三方登陆都是基本都是这么个流程： 1. (A)->(B)流程是获取授权链接，其实就是我们点击豆瓣登陆按钮然后弹出一个登陆的窗口.这一步作为开发人员如果有做过豆瓣登陆的可以从豆瓣开发者里创建应用获取api key 和secret key,Api Key 是用来获取授权链接的，Secret Key是(C)->(D)中来获取Access Token的，豆瓣通过GET获取授权链接如下:        https://www.douban.com/service/auth2/auth?        client_id=0b5405e19c58e4cc21fc11a4d50aae64&        redirect_uri=https://www.example.com/back&        response_type=code&        scope=shuo_basic_r,shuo_basic_w,douban_basic_common         获取到授权链接后，就可以直接使用window.open(url)来弹出登陆窗口了 2. (C)->(D)流程是用来获取访问TOKEN的，得到这个Token后才能去访问用户的资源。在第一步中授权链接有注意到有三个参数，其中第一，二个是非常重要的，redirect url 是我自己网站的一个地址，当我们用账号第一次登陆后，资源方会问我们要不要给予第三方(也就是我们开发者的网站)授权，选择是之后，豆瓣就会根据response_type(上面是code)授权我们scope的权限，其实豆瓣会做一个get请求来调用我网站的redirect url,我们开发者就来获得了这个token（POST 方式）。             https://www.douban.com/service/auth2/token?            client_id=0b5405e19c58e4cc21fc11a4d50aae64&            client_secret=edfc4e395ef93375&            redirect_uri=https://www.example.com/back&            grant_type=authorization_code&            code=9b73a4248                         3. (E)->(F)流程就是来访问用户数据的了，通过第二步我们在redirect_url 页面上获得了access Token,接下来我们通过这个token 再去请求豆瓣服务资源，同样有一个开放接口，获取的用户信息后就可以do what you want了        curl \"https://api.douban.com/v2/user/~me\"         -H \"Authorization: Bearer a14afef0f66fcffce3e0fcd2e34f6ff4\"  以上就是OAuth 2.0 客户的一个流程，及客户端的一些基本操作    ",
	        "url": "/php/2014/03/11/PHP-OAuth2.0(douban).html"
	      }
	      ,
	    
	      "php-2014-03-04-php-upload-progress-bar-html": {
	      	"imgSrc": "/assets/images/upsplash/image_12.jpeg",
	        "title": "PHP 上传进度条..",
	        "author": "",
	        "category": "php",
	        "content": "####准备工作： 1. PHP5.4以上 2. php.ini 开启session.upload_progress.enable 3. 更改这两个参数以适应大文件上传：post_max_size,upload_max_filesize####开始代码部分（直接贴了）： 1. HTML(PHP copy上传文件，就在这里了省的再建个文件):{% highlight php %}        \";                    var_dump($v);                    echo \"\";                }                    die();        }        if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\" && !empty($_FILES[\"userfile\"])) {            move_uploaded_file($_FILES['userfile']['tmp_name'], \"./a\");        }        ?>                          File Upload Progress Bar                                                                        \">                                                        {% endhighlight %}               上面这段需要解释一下，1)Form里面有个隐藏域这个是必不可少的，用来带上上传session名称的，2)还有个IFrame     用来做类似无刷新上传的，3)div bar_blank这里是用来显示上传进度的 2. Javascript:{% highlight php %}        function toggleBarVisibility() {            var e = document.getElementById(\"bar_blank\");            e.style.display = (e.style.display == \"block\") ? \"none\" : \"block\";        }                function createRequestObject() {            var http;            if (navigator.appName == \"Microsoft Internet Explorer\") {            http = new ActiveXObject(\"Microsoft.XMLHTTP\");            }            else {            http = new XMLHttpRequest();            }            return http;        }                function sendRequest() {            var http = createRequestObject();            http.open(\"GET\", \"progress.php\");            http.onreadystatechange = function () { handleResponse(http); };            http.send(null);        }                function handleResponse(http) {            var response;            if (http.readyState == 4) {            response = http.responseText;            document.getElementById(\"bar_color\").style.width = response + \"%\";            document.getElementById(\"status\").innerHTML = response + \"%\";                        if (response < 100) {            setTimeout(\"sendRequest()\", 1000);            }            else {            toggleBarVisibility();            document.getElementById(\"status\").innerHTML = \"Done.\";            }            }        }                function startUpload() {            toggleBarVisibility();            setTimeout(\"sendRequest()\", 1000);        }                (function () {        document.getElementById(\"myForm\").onsubmit = startUpload;        })();{% endhighlight %}             以上Javascript主要是做了发送周期性的发送数据到progress.php,这个php返回上传进度然后javascript 更新div样式来反应上传的进度，可以用Jquery来做，理解了原理怎么样都可以 3. Progress.php:{% highlight php %}        session_start();        $key = ini_get(\"session.upload_progress.prefix\") . \"myForm\";        if (!empty($_SESSION[$key]))         {                $current = $_SESSION[$key][\"bytes_processed\"];            $total = $_SESSION[$key][\"content_length\"];            echo $current < $total ? ceil($current / $total * 100) : 100;        }        else         {            echo 100;        }{% endhighlight %}         这个文件就是简单的计算上传比例然后返回给客户端。####脚本跑过没有问题，原文来源：[http://www.sitepoint.com/tracking-upload-progress-with-php-and-javascript/][1]         [1]: http://www.sitepoint.com/tracking-upload-progress-with-php-and-javascript/",
	        "url": "/php/2014/03/04/PHP_Upload_Progress_bar.html"
	      }
	      ,
	    
	      "php-2014-01-21-php-string-len-count-html": {
	      	"imgSrc": "/assets/images/upsplash/image_13.jpeg",
	        "title": "PHP 获取字符串长度，字节数...",
	        "author": "",
	        "category": "php",
	        "content": "PHP获取字符串长度有两个函数：mb_strlen 和strlen,mb_strlen在安装的时候加上--enable-mbstring 以支持国际化字符.用两个个文件来说明： 1. 首先建一个文件，文件默认编码为：ANSI格式，也就是平常建项目的时候建GBK编码的项目            $string = \"测试用的字符串abcdefg\";                1).  var_dump(mb_detect_encoding($string)).\"\";//布尔值false                2).  echo mb_strlen($string).\"\";//21                3).  echo mb_strlen($string,\"gbk\").\"\";//14                4).  echo mb_strlen($string,\"utf-8\").\"\";//16                5).  echo strlen($string).\"\";21上面的例子中1)中不给第二个参数的情况下为false,因为mbstring 里面mb_detect_order默认是没有检查中文的，所以改为：  `var_dump(mb_detect_encoding($string,\"gbk\"))`,这样的话结果就为CP936，说明确实是中文了，从2),3),4),5)中可以看出,正确的结果是3),2)和5)是把一个中文当两个字符处理，也就是在gbk下的字节数，gbk编码下中文字符是占两个字节，所以这两个  结果是将算出了字节数，也就是所谓的内部编码(文件的编码)，二第四个完全错了,这个是指定编码错误的情况下，具体怎么算了我也不清楚， 2. 再建一个文件使用UTF-8无BOM头部的文件，同样是上面的例子          $string = \"测试用的字符串abcdefg\";                  1.var_dump(mb_detect_encoding($string,\"gbk,UTF-8\")).\"\";//结果是CP936                  2.echo mb_strlen($string).\"\";  //结果是28                3.echo mb_strlen($string,\"gbk\").\"\";  //17                4.echo mb_strlen($string,\"utf-8\").\"\";  //14                5.echo strlen($string).\"\";//28上面例子1中结果错误,文件编码是utf-8，却检查出是cp936,说明检查的顺序有问题，这串字符串GBK可以通过，UTF-8也可以通过，所以正确的检查方式应该是`var_dump(mb_detect_encoding($string,\"UTF-8,gbk\"))`这样就对了。后面几个获取长度的例子中4是正确的，1，5是以文件编码来获取长度了也就是其实算的是字节数，3同样是 混乱出错所以检查字符串长度的正确方式应该是mb_strlen($string,mb_detect_encoding($string,\"UTF-8,gbk\")),仅限中文和英文有些情况下喜欢 把一个中文当两个英文字符处理来算，可以用以下方式：`(mb_strlen(trim($input[$field]),\"UTF-8\")+  strlen(trim($input[$field])))/2`如果是GBK的直接 strlen就可以算出中文算两英文的长度了          ",
	        "url": "/php/2014/01/21/PHP-string-len-count.html"
	      }
	      ,
	    
	      "zf2-2013-12-27-zend-framework2-intergrate-mustache-html": {
	      	"imgSrc": "/assets/images/upsplash/image_14.jpeg",
	        "title": "Zend Framework 2 集成mustache",
	        "author": "",
	        "category": "zf2",
	        "content": " 1. 首先下载mustache 模块，https://github.com/widmogrod/zf2-mustache-module，按照说明可以使用composer安装，但是我喜欢自己定义路径，一步步安装，所以我的目录结构如下：  ![mustcache][1]  [1]: http://akulubala.github.io/public/images/2013/mustache.jpg  mustache php源代放在了ThirdPart目录下，  然后将下载下来的mustache zend模块放到module 里面，和(Application)模块同级目录   2. 在public/index.php中添加如下语句：       {% highlight php %}        include 'system/ThirdPart/Mustache/Autoloader.php';          Mustache_Autoloader::register();     {% endhighlight %} 3. 路径放好之后配置根目录下application.config.php          'modules' => array(            'Mustache',//这里注意顺序，因为所有模块都要使用所以要放在最前面            'Akulubala',            'Application'        )  4.  更改module 目录下 mustache/config/module.config.php          'mustache' => array(                'suffix' => 'mustache',                'suffixLocked' => true,                'cache' => PROJECT_PATH. 'data/mustache' // 这个数组里面可以配置mustache，PORJECT_PATH 是项目根路径        ) 5.  现在更改Application module 里面的application/config/module.config.php  ,添加下面一段到view_manager 数组里面          'strategies' => array(                'Mustache\\View\\Strategy'        ) 6.  现在就可以在每个模块的view里面使用mustache了，建立index.mustache 测试，通过..具体原理还是要多读读代码，通过这个配置  了解了zend framework 2模块的使用，即插即用的使用方式，Application module是必须的作为bootstrap使用",
	        "url": "/zf2/2013/12/27/Zend-framework2-intergrate-mustache.html"
	      }
	      ,
	    
	      "zf2-2013-12-20-zf2-install-firephp-html": {
	      	"imgSrc": "/assets/images/upsplash/image_15.jpeg",
	        "title": "Zend Framework 2 安装使用Firephp",
	        "author": "",
	        "category": "zf2",
	        "content": "##Zend framework 2 配置firephp方法一（全局使用）===  下载firephp：（http://www.firephp.org/DownloadRelease/FirePHPLibrary-FirePHPCore-0.3.2）      我的放置位置并加上namespace如同：    ![project_tree][1]    图中文件名要改掉:FirePHP.class.php -&gt;FirePHP.php    修改public 目录下index.php 为:          chdir(dirname(__DIR__));  define(\"PROJECT_PATH\", getcwd().DIRECTORY_SEPARATOR);  include   'system/Zend/Loader/AutoloaderFactory.php';  Zend\\Loader\\AutoloaderFactory::factory(array(  'Zend\\Loader\\StandardAutoloader' =&gt; array(      'autoregister_zf' =&gt; true,      'namespaces'=&gt;array(          'Library'=&gt;PROJECT_PATH.'system\\Library'    ))  ));                更改ZF2对于firephp的默认namespace(路径：zend/Log/Writer)，如图：![enter image description here][2]  module/Module.php 文件中增加：          use Zend\\Log\\Logger;  use Zend\\Log\\Writer\\FirePhp\\FirePhpBridge;  use Zend\\Log\\Writer\\FirePhp;   use Library\\FirePHPCore\\FirePHP as FirephpCore;  注意大小写，引入了两个firephp      然后在getServiceConfig()return 的数组中添加：  'log' =&gt; function (\\$sm){       \\$log = new Logger();       \\$writer = new FirePhp(new FirePhpBridge(new FirephpCore()));       \\$log-&gt;addWriter(\\$writer);       return \\$log;   }    ###大功告成：在controller 测试：  $this-&gt;getServiceLocator()-&gt;get(‘log’)-&gt;info(‘It works ssss’);方法二：每个模块里面都需要引入firephp 文件===  从方法一种2开始，但是不要更改任何东西，不要加namespace,可以改文件名，后面autoload的时候根据文件名就可以了。  方法一中3，中不要把library 加入到自动加载中  也不要更改zend库中任何东西，方法一中4  module/Module.php 文件中增加：          use Zend\\Log\\Logger;  use Zend\\Log\\Writer\\FirePhp;      然后在getServiceConfig()return 的数组中添加：    'log' =&gt; function ($sm){        $log = new Logger();        $writer = new FirePhp();        $log-&gt;addWriter($writer);        return $log;    } 5. module/autoload_classmap.php中添加：     return array(          'FirePHP' =&gt; 'system/Library/FirePHPCore/FirePHP.php',  ); OK 完成！ 测试同方法一一样！   [1]: http://akulubala.github.io/public/images/2013/project_tree.jpg   [2]: http://akulubala.github.io/public/images/2013/firephp_namespace.jpg  ",
	        "url": "/zf2/2013/12/20/ZF2-install-firephp.html"
	      }
	      ,
	    
	      "system-2013-12-08-install-lnmp-html": {
	      	"imgSrc": "/assets/images/upsplash/image_16.jpeg",
	        "title": "LNMP 编译安装",
	        "author": "",
	        "category": "system",
	        "content": "首先安装PCRE 来支持rewrite  下载地址：ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/  解压缩：sudo tar -zxvf pcre-8.30.tar.gz  -C /usr/local/src  建立安装目录：cd /usr/local  &amp;&amp; sudo mkdir pcre  安装：./configure –prefix=/usr/local/pcre make&amp;&amp;sudo make install  安装完成之后测试!!!再安装Zlib—-1.下载地址：http://prdownloads.sourceforge.net/libpng/zlib-1.2.8.tar.gz?download2.cd /usr/local/src然后：ln -s ~/Downloads Downloads 将Downloads目录做个软链接3.tar -zxvf zlib-1.2.8.tar.gz -C /usr/local/src4.安装：./configure –prefix=/usr/local/zlib  make&amp;&amp;sudo make install5.用whereis zlib 检查安装成功（是函数库非可执行文件）安装nginx—1.解压缩这里就不废话了，直接放到src下2.cd /usr/local/sudo mkdir lnmpsudo chown ray lnmpsudo chgrp www-data lnmp编译：./configure –prefix=/usr/local/lnmp/nginx –with-pcre=/usr/local/src/pcre-8.30 –with-zlib=/usr/local/src/zlib-1.2.8 –with-http_ssl_module这里注意：pcre和zlib的路径是源文件路径，所以前面我做了两步都是无用功了ngnix自己编译，我遇的到啊～:–with-pcre=path — sets the path to the sources of the PCRE library.3.安装：make&amp;&amp;make install安装Mysql—1.下载地址：http://dev.mysql.com/downloads/file.php?id=4503532.解压到src目录3.建立mysql用户:sudo /usr/sbin/groupadd mysqlsudo /usr/sbin/useradd -g mysql mysql将自己当前帐号加入mysql 组：usermod -a -G mysql ray 4.cd /usr/local/sudo mkdir mysql cd mysqlsudo mkdir mysql_data4.切换到源文件根目录：sudo cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/mysql.sock -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DWITH_EXTRA_CHARSETS:STRING=utf8,gbk -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DWITH_READLINE=1 -DENABLED_LOCAL_INFILE=1 -DMYSQL_DATADIR=/usr/local/lnmp/mysqldata详细配置说明地址：http://dev.mysql.com/doc/refman/5.6/en/source-configuration-options.html5.sudo make &amp;&amp; sudo make install6.sudo cp my-default.cnf /usr/local/lnmp/mysqldata/my.cnf  (注意:my-large.cnf适用于1G内存左右的服务器，可以根据自己配置情况选用my-large.cnf 或 my-huge.cnf 等不同配置)sudo cp mysql.server /etc/init.d/mysqld编辑mysqld,basedir=/usr/local/lnmp/mysql;datadir=/usr/local/lnmp/mysqldata  sudo ./mysql_install_db –defaults-file=/usr/local/lnmp/mysqldata/my.cnf –basedir=/usr/local/lnmp/mysql datadir=/usr/local/lnmp/mysqldata –user=mysql  将mysqld加入服务，直接重启也可以：sudo apt-get install sysv-rc-confsudo sysv-rc-conf mysqld on  测试：service mysqld restart10.缺省安装的mysql是没有密码的，所以我们要修改，以防万一。下面采用三种方式来修改root的口令。 cd /usr/local/lnmp/mysql/bin/mysqladmin -uroot password test ·更多安全参考](http://www.cnblogs.com/xh831213/archive/2011/10/13/2210194.html)PHP 安装—1.安装libxml  用于解析xml的：下载完成后解压缩到/usr/local/libxml2.jpeg安装,下载http://www.ijg.org/files/jpegsrc.v9.tar.gz解压缩到/usr/local/src/目录./configure –prefix=/usr/local/jpeg-9-&gt;make&amp;&amp;sudo make install3.安装PNG支持下载:libpng./configure –prefix=/usr/local/libpng-&gt;make&amp;&amp;sudo make install4.Freetype安装，下载,安装:./configure –prefix=/usr/local/freetype-&gt;make&amp;&amp;sudo make install5.libmcrypt安装,下载安装：./configure –prefix=/usr/local/libmcrypt-2.5.8-&gt;make&amp;&amp;sudo make install6.mhash 安装,下载安装：./configure –prefix=/usr/local/libmcrypt-2.5.8-&gt;make&amp;&amp;sudo make install7.mcrypt下载注意第七条依赖于5,6直接编译出错然后执行以下操作：          1.~/.profile 里面加入export      LD_LIBRARY_PATH=/usr/local/libmcrypt-2.5.8/lib:/usr/local/mhash-0.9.9.9/lib 配置前面两个库的lib地址2../configure –prefix=/usr/local/mcrypt-2.6.8 –with-libmcrypt-prefix=/usr/local/libmcrypt-2.5.8      可惜又报另一个错误参考这里export CFLAGS=”-I /usr/local/mhash-0.9.9.9/include/”export LDFLAGS=”-L /usr/local/mhash-0.9.9.9/lib -I /usr/local/mhash-0.9.9.9/include/”再次执行configure 通过,但是make&amp;&amp;sudo make install 却报错结果再参考make file 选项发现上面两条export 是不正确的正确的应该是：  export LDFLAGS=”-L/usr/local/libmcrypt-2.5.8/lib -L/usr/local/mhash-0.9.9.9/lib”;export CFLAGS=”-I/usr/local/libmcrypt-2.5.8/include -I/usr/local/mhash-0.9.9.9/include”注：/etc/ld.so.conf,关于.so动态库的载入参考鸟哥(http://linux.vbird.org/linux_basic/0520source_code_and_tarball.php)最终编译安装mcrypt 成功,以上PHP 依赖库安装完毕####接下来正式PHP 安装1.下载并加压后  export LIBS=”-lm -ltermcap -lresolv”(注：这句我不晓得是什么意思所以没用)export LD_LIBRARY_PATH=”/usr/local/lnmp/mysql/lib:/lib:/usr/lib/:/usr/local/lib/:/usr/local/libmcrypt-2.5.8/lib/:/usr/local/mhash-0.9.9.9/lib/:/lib64/:/usr/lib64/:/usr/local/lib64/” (参考不同操作系统设置:http://blog.chinaunix.net/uid-14504139-id-3867128.html)../configure--prefix=/usr/local/lnmp/php--with-config-file-path=/usr/local/lnmp/php/etc --with-mysql=/usr/local/lnmp/mysql --with-mysqli=/usr/local/lnmp/mysql/bin/mysql_config --with-freetype-dir=/usr/local/freetype --with-jpeg-dir=/usr/local/jpeg-9--with-png-dir=/usr/local/libpng--with-zlib--with-libxml-dir=/usr/local/libxml2 --enable-xml --disable-rpath --enable-bcmath --enable-shmop[消息队列](http://wizardmin.com/2012/08/php-ipc-sysvmsg/) --enable-sysvsem--enable-inline-optimization(使用更多内存加快程序结果)--with-curl--enable-mbregex--enable-fpm--enable-mbstring--with-mcrypt=/usr/local/mcrypt--with-gd--enable-gd-native-ttf--with-openssl--with-mhash --enable-pcntl（打开进程控制支持）--enable-sockets--with-xmlrpc--enable-zip--enable-soap --enable-fpm(开始没有加这个NGINX 就没办法解析PHP 有些作者真是肯跌啊)出错啦：解决方法：sudo apt-get install libcurl4-gnutls-dev 就不编译安装啦再次错错：error: mcrypt.h not found. Please reinstall libmcrypt解决方法：sudo apt-get install libmcrypt-dev很纳闷再次错误：找不到mysql_config 这次是打字错误，更郁闷完整configure： ./configure--prefix=/usr/local/lnmp/php  --with-config-file-path=/usr/local/lnmp/php/etc  --with-mysql=/usr/local/lnmp/mysql  --with-mysqli=/usr/local/lnmp/mysql/bin/mysql_config  --with-pdo-mysql=/usr/local/lnmp/mysql  --with-mysql-sock=/usr/local/lnmp/mysql/mysql.sock  --with-freetype-dir=/usr/local/freetype  --enable-fpm  --with-fpm-user=ray  --with-fpm-group=www-data  --with-jpeg-dir=/usr/local/jpeg-9  --with-png-dir=/usr/local/libpng  --with-zlib  --with-libxml-dir=/usr/local/libxml2  --enable-xml  --enable-bcmath  --enable-shmop  --enable-sysvsem  --enable-inline-optimization  --with-curl  --enable-mbregex  --enable-mbstring  --with-mcrypt=/usr/local/mcrypt  --with-gd  --enable-gd-native-ttf  --with-openssl  --with-mhash  --enable-pcntl  --enable-sockets  --enable-zip  --enable-soapmake&amp;&amp;make test&amp;&amp;make install启动php-fpm,cd /usr/local/lnmp/php/sbin/php-fpm",
	        "url": "/system/2013/12/08/install-lnmp.html"
	      }
	      
	    
	 };
</script>
<script type="text/javascript" src="/assets/dist/manifest.626e421eeb1648413298.js"></script>
<script type="text/javascript" src="/assets/dist/vendor.c723a397e25bb5ad1a5a.js"></script>
<script type="text/javascript" src="/assets/dist/app.0eed6e1f6e88200b28c4.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
<script type="text/javascript" src="/assets/dist/fullpagejs/vendors/jquery.slimscroll.min.js"></script>
<script type="text/javascript" src="/assets/dist/fullpagejs/vendors/scrolloverflow.min.js"></script>
<script type="text/javascript" src="/assets/dist/fullpagejs/dist/jquery.fullpage.extensions.min.js"></script>
<script type="text/javascript" src="/assets/dist/fullpagejs/dist/jquery.fullpage.min.js"></script>
</body>
</html>
